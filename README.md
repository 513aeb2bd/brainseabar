# brainseabar
난해한 brainseabar(Brain-Sea-Bar) 프로그래밍 언어

## 소개
스택 기반의 난해한 프로그래밍 언어입니다.
생각보다 많은 개발자들이 부적절한 글꼴을 사용하는 것을 봤습니다. 이 언어는 그들에게 암묵적으로 적절한 글꼴 사용을 강제할 것입니다.
오직 Brainf\.\.k 언어만 참고했으며, 이름의 기원은 f\.\.k을 한국말로 바꾼 것입니다.
튜링 완전한지는 모릅니다.

## 구조
### 데이터
brainseabar은 모든 데이터를 부호 없는 8비트 정수형으로 다룹니다.

### 스택과 스택 포인터
brainseabar은 스택 구조임과 동시에 스택 포인터가 임의의 품목을 가리킬 수 있습니다.
스택의 용량은 최대 2MiB입니다.
현재 스택 포인터의 위치는 `sp`로 표현합니다.
n칸 왼쪽은 `sp-n`으로 표현합니다.
m칸 오른쪽은 `sp+m`으로 표현합니다.

```
    +----+----+----+----+----|----|----+----+----+
... | .. | .. | .. | .. | .. | .. | .. | .. | .. | ...
    +----+----+----+----+----|----|----+----+----+
                    sp-2 sp-1| sp |sp+1 sp+2
```

### 명령어
push 작업 이전에 `sp`와 그 왼쪽의 품목들을 왼쪽으로 한 칸씩 밉니다.
pop 작업 이후에 `sp` 왼쪽의 품목들을 오른쪽으로 한 칸씩 당깁니다.
brainseabar의 명령어는 13개가 있으며, 내용은 아래와 같습니다.

```
1  // 1을 stack에 push
    +----+----|----|----+----+            +----+----|----|----+----+
... | aa | bb | cc | dd | ee | ... => ... | bb | cc |  1 | dd | ee | ...
    +----+----|----|----+----+            +----+----|----|----+----+
              | sp |                                | sp |

0  // sp가 가리키는 품목을 stack으로부터 pop
    +----+----|----|----+----+            +----+----|----|----+----+
... | aa | bb | cc | dd | ee | ... => ... | xx | aa | bb | dd | ee | ...
    +----+----|----|----+----+            +----+----|----|----+----+
              | sp |                                | sp |

'  // sp를 왼쪽으로 한 칸 이동, 또는 테이프를 오른쪽으로 한 칸 이동
    +----+----|----|----+----+            +----|----|----+----+----+
... | aa | bb | cc | dd | ee | ... => ... | aa | bb | cc | dd | ee | ...
    +----+----|----|----+----+            +----|----|----+----+----+
              | sp |                           | sp |

"  // sp를 오른쪽으로 한 칸 이동, 또는 테이프를 왼쪽으로 한 칸 이동
    +----+----|----|----+----+            +----+----+----|----|----+
... | aa | bb | cc | dd | ee | ... => ... | aa | bb | cc | dd | ee | ...
    +----+----|----|----+----+            +----+----+----|----|----+
              | sp |                                     | sp |

I  // sp 위치의 값을 push (복사 기능)
    +----+----|----|----+----+            +----+----|----|----+----+
... | aa | bb | cc | dd | ee | ... => ... | bb | cc | cc | dd | ee | ...
    +----+----|----|----+----+            +----+----|----|----+----+
              | sp |                                | sp |

l  // 두 번 pop하고, 그 두 값의 arithmetic add 값을 push
    +----+----|----|----+----+            +----+----|------------|----+----+
... | aa | bb | cc | dd | ee | ... => ... | xx | aa | bb PLUS cc | dd | ee | ...
    +----+----|----|----+----+            +----+----|------------|----+----+
              | sp |                                |     sp     |

|  // 두 번 pop하고, 그 두 값의 bitwise nand 값을 push
    +----+----|----|----+----+            +----+----|------------|----+----+
... | aa | bb | cc | dd | ee | ... => ... | xx | aa | bb NAND cc | dd | ee | ...
    +----+----|----|----+----+            +----+----|------------|----+----+
              | sp |                                |     sp     |

i  // 1바이트 정수를 입력받고, 그 값을 push
    +----+----|----|----+----+            +----+----|----|----+----+
... | aa | bb | cc | dd | ee | ... => ... | bb | cc | ii | dd | ee | ...
    +----+----|----|----+----+            +----+----|----|----+----+
              | sp |                                | sp |

j  // sp 위치의 값을 ascii로 출력
[  // sp 위치의 값이 0이면, 일치하는 ]의 위치까지 정방향으로 점프
]  // sp 위치의 값이 0이 아니면, 일치하는 [의 위치까지 역방향으로 점프

O  // sp 위치의 값을 sp-1 위치의 값과 바꾸기
    +----+----|----|----+----+            +----+----|----|----+----+
... | aa | bb | cc | dd | ee | ... => ... | aa | cc | bb | dd | ee | ...
    +----+----|----|----+----+            +----+----|----|----+----+
          sp-1| sp |                            sp-1| sp |

J  // sp 위치의 값을 number로 출력
```

**`J`와 `O` 명령어는 추후에 삭제될 예정입니다.
해석기는 위 명령어 외의 모든 문자는 무시하지만, 코드의 가독성(?)을 위해 적절한 whitespace를 추천합니다.**

## 해석기의 비정상 종료 조건
* 스택이 최대 용량을 초과하는 경우
* 스택에 품목이 없는 상태에서 pop을 시도하는 경우

## 주석
주석은 해시 기호(#)부터 행의 끝까지입니다.

```
11|1l1l    # push 0
```

## 간단한 예제
```
|I|   # 두 수의 논리 곱 계산
'I|"I||   # 두 수의 논리 합 계산
11|1l1l   # 숫자 0 생성
1IlIl1lIlIl1lIlIl1lIl   # 숫자 170 생성
```

## 함수 작성 규칙
* 1번 매개변수는 `sp` 위치에 있으며, n번 매개변수는 `sp`의 `(n-1)`번째 위치에 있습니다.
* 매개변수는 Callee에 의해 제거됩니다.
* 1번 반환값은 `sp` 위치에 있으며, n번 반환값 `sp`의 `(n-1)`번째 위치에 있습니다.

## 해석기 사용 방법
1. 프로그램을 생성합니다. (예: `bsb`)
1. `./bsb <source code>` 명령어로 해석을 시작합니다.
